<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FruitCheck - AI Fruit Quality Classification System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#10b981",
              "primary-dark": "#059669",
              "primary-light": "#34d399",
              secondary: "#064e3b",
              accent: "#6ee7b7",
              dark: "#1f2937",
              light: "#f0fdf4",
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>
    <style>
      .gradient-bg {
        background: linear-gradient(135deg, #064e3b 0%, #10b981 100%);
      }
      .gradient-text {
        background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }
      .loading-spinner {
        border: 5px solid #f0fdf4;
        border-top: 5px solid #10b981;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .drop-zone {
        transition: all 0.3s ease;
      }
      .drop-zone.dragover {
        border-color: #10b981;
        background-color: rgba(16, 185, 129, 0.05);
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }
      .confidence-bar {
        transition: width 0.8s ease-out;
      }
      .result-card {
        animation: slideUp 0.5s ease-out;
      }
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .pulse-green {
        animation: pulseGreen 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes pulseGreen {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
    </style>
  </head>
  <body class="font-sans antialiased">
    <!-- Navigation -->
    <nav
      class="fixed w-full glass-effect shadow-lg z-50 border-b border-green-100"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <!-- Logo Section -->
          <a
            href="#home"
            class="flex items-center space-x-3 hover:opacity-80 transition"
          >
            <div
              class="w-12 h-12 bg-gradient-to-br from-primary to-primary-light rounded-xl flex items-center justify-center shadow-lg"
            >
              <i class="fas fa-leaf text-2xl text-white"></i>
            </div>
            <div class="flex flex-col">
              <span class="text-2xl font-bold text-secondary leading-none"
                >FruitCheck</span
              >
              <span class="text-xs text-gray-500 leading-none mt-0.5"
                >Nayla Fitriyatus 09020222038</span
              >
            </div>
          </a>

          <!-- Desktop Navigation -->
          <div class="hidden md:flex items-center space-x-2">
            <a
              href="#home"
              class="text-gray-700 hover:text-primary hover:bg-green-50 px-4 py-2 rounded-lg transition font-medium"
              >Home</a
            >
            <a
              href="#technology"
              class="text-gray-700 hover:text-primary hover:bg-green-50 px-4 py-2 rounded-lg transition font-medium"
              >Technology</a
            >
            <a
              href="#features"
              class="bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-secondary text-white px-6 py-2.5 rounded-lg transition font-semibold shadow-lg hover:shadow-xl ml-2"
            >
              <i class="fas fa-camera mr-2"></i>Start Checking
            </a>
          </div>

          <!-- Mobile Menu Button -->
          <button
            id="mobileMenuBtn"
            class="md:hidden text-gray-700 hover:text-primary transition p-2"
          >
            <i class="fas fa-bars text-2xl"></i>
          </button>
        </div>

        <!-- Mobile Menu -->
        <div
          id="mobileMenu"
          class="hidden md:hidden pb-4 pt-2 border-t border-green-100 mt-2"
        >
          <div class="flex flex-col space-y-2">
            <a
              href="#home"
              class="text-gray-700 hover:text-primary hover:bg-green-50 px-4 py-3 rounded-lg transition font-medium text-center"
              >Home</a
            >
            <a
              href="#technology"
              class="text-gray-700 hover:text-primary hover:bg-green-50 px-4 py-3 rounded-lg transition font-medium text-center"
              >Technology</a
            >
            <a
              href="#features"
              class="bg-gradient-to-r from-primary to-primary-dark text-white px-6 py-3 rounded-lg transition font-semibold shadow-lg text-center"
            >
              <i class="fas fa-camera mr-2"></i>Start Checking
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section
      id="home"
      class="gradient-bg pt-32 pb-20 min-h-screen flex items-center relative overflow-hidden"
    >
      <!-- Decorative elements -->
      <div
        class="absolute top-20 right-20 w-64 h-64 bg-white rounded-full filter blur-3xl opacity-5"
      ></div>
      <div
        class="absolute bottom-20 left-20 w-96 h-96 bg-accent rounded-full filter blur-3xl opacity-10"
      ></div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="grid md:grid-cols-2 gap-16 items-center">
          <div class="text-white">
            <div
              class="inline-block bg-white bg-opacity-10 backdrop-blur-lg px-4 py-2 rounded-full mb-6"
            >
              <span class="text-accent font-semibold">ðŸŽ¯ 99.3% Accuracy</span>
            </div>
            <h1 class="text-5xl md:text-7xl font-black mb-6 leading-tight">
              Smart Fruit
              <span class="text-accent block">Quality Check</span>
            </h1>

            <!-- Hanya tombol Start Checking -->
            <div class="flex flex-wrap gap-4">
              <a
                href="#features"
                class="bg-white text-primary hover:bg-accent hover:text-secondary px-10 py-4 rounded-xl font-bold transition shadow-2xl inline-flex items-center group"
              >
                <i
                  class="fas fa-camera mr-3 group-hover:scale-110 transition"
                ></i>
                Start Checking
              </a>
            </div>

            <div class="mt-16 grid grid-cols-3 gap-6">
              <div
                class="bg-white bg-opacity-10 backdrop-blur-lg p-6 rounded-2xl text-center"
              >
                <p class="text-4xl font-black text-accent mb-2">99.3%</p>
                <p class="text-sm text-green-200">Accuracy</p>
              </div>
              <div
                class="bg-white bg-opacity-10 backdrop-blur-lg p-6 rounded-2xl text-center"
              >
                <p class="text-4xl font-black text-accent mb-2">5</p>
                <p class="text-sm text-green-200">Fruits</p>
              </div>
              <div
                class="bg-white bg-opacity-10 backdrop-blur-lg p-6 rounded-2xl text-center"
              >
                <p class="text-4xl font-black text-accent mb-2">Fast</p>
                <p class="text-sm text-green-200">Real-time</p>
              </div>
            </div>
          </div>
          <div class="relative">
            <div class="relative z-10 animate-float">
              <div
                class="bg-white bg-opacity-10 backdrop-blur-lg p-4 rounded-3xl shadow-2xl"
              >
                <img
                  src="https://images.unsplash.com/photo-1619566636858-adf3ef46400b?w=600&h=600&fit=crop"
                  alt="Fresh Fruits"
                  class="rounded-2xl"
                />
              </div>
            </div>
            <div
              class="absolute top-10 -right-10 w-72 h-72 bg-accent rounded-full filter blur-3xl opacity-20 pulse-green"
            ></div>
            <div
              class="absolute -bottom-10 -left-10 w-72 h-72 bg-white rounded-full filter blur-3xl opacity-10"
            ></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Technology Section -->
    <section id="technology" class="py-24 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-20">
          <span class="text-primary font-bold text-sm uppercase tracking-wider"
            >How It Works</span
          >
          <h2 class="text-5xl font-black text-secondary mb-6 mt-3">
            Advanced <span class="gradient-text">Technology</span>
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
            Built with state-of-the-art machine learning algorithms and computer
            vision techniques
          </p>
        </div>

        <div class="grid md:grid-cols-2 gap-16 items-center mb-20">
          <div>
            <h3 class="text-4xl font-black text-secondary mb-10">
              Our Technology Stack
            </h3>
            <div class="space-y-8">
              <div class="flex items-start">
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary to-primary-light rounded-2xl flex items-center justify-center mr-6 flex-shrink-0 shadow-lg"
                >
                  <i class="fas fa-network-wired text-3xl text-white"></i>
                </div>
                <div>
                  <h4 class="font-bold text-xl text-dark mb-2">
                    KELM Algorithm
                  </h4>
                  <p class="text-gray-600 leading-relaxed">
                    Kernel Extreme Learning Machine with RBF kernel provides
                    fast training and high accuracy with C=100, Ïƒ=15.
                  </p>
                </div>
              </div>
              <div class="flex items-start">
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary to-primary-light rounded-2xl flex items-center justify-center mr-6 flex-shrink-0 shadow-lg"
                >
                  <i class="fas fa-eye text-3xl text-white"></i>
                </div>
                <div>
                  <h4 class="font-bold text-xl text-dark mb-2">
                    Deep Feature Extraction
                  </h4>
                  <p class="text-gray-600 leading-relaxed">
                    ResNet50 architecture for robust feature extraction from
                    fruit images.
                  </p>
                </div>
              </div>
              <div class="flex items-start">
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary to-primary-light rounded-2xl flex items-center justify-center mr-6 flex-shrink-0 shadow-lg"
                >
                  <i class="fas fa-crosshairs text-3xl text-white"></i>
                </div>
                <div>
                  <h4 class="font-bold text-xl text-dark mb-2">
                    K-Fold Cross Validation
                  </h4>
                  <p class="text-gray-600 leading-relaxed">
                    Rigorous validation with K=9 fold cross-validation ensuring
                    robust performance.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div
            class="bg-gradient-to-br from-primary to-primary-dark p-10 rounded-3xl shadow-2xl text-white"
          >
            <h3 class="text-3xl font-bold mb-8">Performance Metrics</h3>
            <div class="space-y-8">
              <div>
                <div class="flex justify-between mb-3">
                  <span class="font-semibold text-lg">Mean Accuracy</span>
                  <span class="font-black text-2xl">99.3%</span>
                </div>
                <div
                  class="w-full bg-white bg-opacity-20 rounded-full h-4 overflow-hidden"
                >
                  <div
                    class="bg-accent rounded-full h-4 shadow-lg"
                    style="width: 99.3%"
                  ></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-3">
                  <span class="font-semibold text-lg">Best Fold (Fold 8)</span>
                  <span class="font-black text-2xl">99.7%</span>
                </div>
                <div
                  class="w-full bg-white bg-opacity-20 rounded-full h-4 overflow-hidden"
                >
                  <div
                    class="bg-white rounded-full h-4 shadow-lg"
                    style="width: 99.7%"
                  ></div>
                </div>
              </div>
              <div class="pt-8 border-t border-white border-opacity-30">
                <div class="grid grid-cols-2 gap-6 text-center">
                  <div
                    class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-6"
                  >
                    <p class="text-5xl font-black mb-2">5</p>
                    <p class="text-sm opacity-90">Fruit Types</p>
                  </div>
                  <div
                    class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-6"
                  >
                    <p class="text-5xl font-black mb-2">9</p>
                    <p class="text-sm opacity-90">K-Folds</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-24 bg-gradient-to-b from-light to-white">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <span class="text-primary font-bold text-sm uppercase tracking-wider"
            >Try The System</span
          >
          <h2 class="text-5xl font-black text-secondary mb-6 mt-3">
            Try It <span class="gradient-text">Yourself</span>
          </h2>
          <p class="text-xl text-gray-600">
            Upload a fruit image and get instant quality classification with
            confidence score
          </p>
        </div>

        <!-- Supported Fruits -->
        <div
          class="mb-16 bg-white rounded-3xl shadow-2xl p-10 border-2 border-green-50"
        >
          <h3 class="text-3xl font-black text-secondary mb-10 text-center">
            Supported Fruits
          </h3>
          <div class="grid grid-cols-2 md:grid-cols-5 gap-8">
            <div class="text-center">
              <div
                class="w-24 h-24 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg"
              >
                <i class="fas fa-apple-alt text-4xl text-red-600"></i>
              </div>
              <p class="font-bold text-dark text-lg">Apple</p>
            </div>
            <div class="text-center">
              <div
                class="w-24 h-24 bg-yellow-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg"
              >
                <i class="fas fa-lemon text-4xl text-yellow-600"></i>
              </div>
              <p class="font-bold text-dark text-lg">Banana</p>
            </div>
            <div class="text-center">
              <div
                class="w-24 h-24 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg"
              >
                <i class="fas fa-circle text-4xl text-purple-600"></i>
              </div>
              <p class="font-bold text-dark text-lg">Grape</p>
            </div>
            <div class="text-center">
              <div
                class="w-24 h-24 bg-orange-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg"
              >
                <i class="fas fa-seedling text-4xl text-orange-600"></i>
              </div>
              <p class="font-bold text-dark text-lg">Mango</p>
            </div>
            <div class="text-center">
              <div
                class="w-24 h-24 bg-orange-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg"
              >
                <i class="fas fa-circle text-4xl text-orange-500"></i>
              </div>
              <p class="font-bold text-dark text-lg">Orange</p>
            </div>
          </div>
        </div>

        <!-- Upload & Result Card -->
        <div
          class="bg-white rounded-3xl shadow-2xl p-10 md:p-14 border-2 border-green-50"
        >
          <div id="upload-section">
            <div
              class="drop-zone border-4 border-dashed border-gray-300 rounded-2xl p-16 text-center cursor-pointer hover:border-primary transition"
              id="dropZone"
            >
              <i
                class="fas fa-cloud-upload-alt text-7xl text-gray-400 mb-6"
              ></i>
              <h3 class="text-3xl font-bold text-dark mb-3">
                Upload Fruit Image
              </h3>
              <p class="text-gray-600 mb-8 text-lg">
                Drag and drop your image here or click to browse
              </p>
              <input
                type="file"
                id="fileInput"
                accept="image/*"
                class="hidden"
              />
              <button
                onclick="document.getElementById('fileInput').click()"
                class="bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-secondary text-white px-12 py-4 rounded-xl font-bold transition shadow-xl inline-flex items-center text-lg"
              >
                <i class="fas fa-folder-open mr-3"></i>
                Choose File
              </button>
              <p class="text-sm text-gray-500 mt-6">
                Supported formats: PNG, JPG, JPEG (Max 16MB)
              </p>
            </div>
          </div>

          <div id="loading-section" class="hidden text-center py-20">
            <div class="loading-spinner mx-auto mb-6"></div>
            <p class="text-2xl font-bold text-dark mb-2">Analyzing image...</p>
            <p class="text-gray-600 text-lg">
              Please wait while we classify your fruit
            </p>
          </div>

          <div id="result-section" class="hidden result-card">
            <div class="grid md:grid-cols-2 gap-10">
              <div>
                <h3
                  class="text-xl font-bold text-secondary mb-4 flex items-center"
                >
                  <i class="fas fa-image text-primary mr-2"></i>
                  Uploaded Image
                </h3>
                <div class="relative group">
                  <img
                    id="resultImage"
                    src=""
                    alt="Uploaded fruit"
                    class="rounded-2xl shadow-2xl w-full border-4 border-green-100"
                  />
                  <div
                    class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-60 transition rounded-2xl"
                  ></div>
                </div>
              </div>
              <div>
                <h3
                  class="text-xl font-bold text-secondary mb-4 flex items-center"
                >
                  <i class="fas fa-chart-bar text-primary mr-2"></i>
                  Classification Result
                </h3>

                <!-- Main Result Card -->
                <div
                  class="bg-gradient-to-br from-primary to-primary-dark p-8 rounded-2xl text-white mb-6 shadow-2xl"
                >
                  <p class="text-sm opacity-90 mb-2 uppercase tracking-wider">
                    Predicted Class
                  </p>
                  <p id="resultLabel" class="text-4xl font-black mb-4">Fresh</p>
                  <div
                    class="flex items-center justify-between bg-white bg-opacity-20 backdrop-blur-lg p-4 rounded-xl"
                  >
                    <div class="flex items-center">
                      <i class="fas fa-check-circle text-2xl mr-3"></i>
                      <span class="font-semibold">Confidence</span>
                    </div>
                    <span id="resultConfidence" class="text-2xl font-black"
                      >95.5%</span
                    >
                  </div>
                </div>

                <!-- All Confidences -->
                <div
                  class="bg-white p-6 rounded-2xl shadow-lg mb-6 border-2 border-green-50"
                >
                  <h4 class="font-bold text-secondary mb-4 flex items-center">
                    <i class="fas fa-list text-primary mr-2"></i>
                    All Predictions
                  </h4>
                  <div id="allConfidences" class="space-y-3">
                    <!-- populated via JS -->
                  </div>
                </div>

                <button
                  onclick="resetUpload()"
                  class="w-full bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-secondary text-white px-8 py-4 rounded-xl font-bold transition shadow-lg hover:shadow-2xl"
                >
                  <i class="fas fa-redo mr-2"></i>
                  Upload Another Image
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="gradient-bg text-white py-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-4 gap-12 mb-12">
          <div>
            <div class="flex items-center space-x-3 mb-6">
              <div
                class="w-12 h-12 bg-white bg-opacity-20 backdrop-blur-lg rounded-xl flex items-center justify-center"
              >
                <i class="fas fa-leaf text-2xl text-accent"></i>
              </div>
              <div>
                <span class="text-2xl font-black">FruitCheck</span>
                <p class="text-xs text-green-200">Nayla Fitriyatus Saidah</p>
              </div>
            </div>
          </div>
          <div>
            <h4 class="font-bold text-lg mb-4">Quick Links</h4>
            <ul class="space-y-3 text-green-100">
              <li>
                <a href="#home" class="hover:text-white transition">Home</a>
              </li>
              <li>
                <a href="#technology" class="hover:text-white transition"
                  >Technology</a
                >
              </li>
              <li>
                <a href="#features" class="hover:text-white transition"
                  >Try Now</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold text-lg mb-4">Resources</h4>
            <ul class="space-y-3 text-green-100">
              <li>
                <a
                  href="https://drive.google.com/drive/folders/1LxNKcwDowVOgwkt8ESUNIaazvzQFzOWQ"
                  target="_blank"
                  class="hover:text-white transition flex items-center"
                >
                  <i class="fas fa-file-alt mr-3"></i>
                  Documentation
                </a>
              </li>
              <li>
                <a
                  href="https://drive.google.com/drive/folders/1LxNKcwDowVOgwkt8ESUNIaazvzQFzOWQ"
                  target="_blank"
                  class="hover:text-white transition flex items-center"
                >
                  <i class="fas fa-scroll mr-3"></i>
                  Research Paper
                </a>
              </li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold text-lg mb-4">Get In Touch</h4>
            <ul class="space-y-3">
              <li>
                <a
                  href="mailto:fitriyatusnayla@gmail.com"
                  class="hover:text-white transition flex items-center"
                >
                  <i class="fas fa-envelope mr-3"></i>
                  Email
                </a>
              </li>
              <li>
                <a
                  href="https://wa.me/6281391597605"
                  target="_blank"
                  class="hover:text-white transition flex items-center"
                >
                  <i class="fab fa-whatsapp mr-3"></i>
                  Sapa Nayla
                </a>
              </li>
            </ul>
          </div>
        </div>

        <div
          class="text-center pt-8 border-t border-green-700 border-opacity-50"
        >
          <p class="text-sm text-green-200">
            &copy; 2025 FruitCheck. All rights reserved.
          </p>
        </div>
      </div>
    </footer>

    <!-- =======================
         SCRIPT UTAMA
    ======================== -->
    <script>
      // ===============================
      // Mobile Menu Toggle
      // ===============================
      document
        .getElementById("mobileMenuBtn")
        .addEventListener("click", function () {
          document.getElementById("mobileMenu").classList.toggle("hidden");
        });

      // ===============================
      // DOM ELEMENTS
      // ===============================
      const fileInput = document.getElementById("fileInput");
      const dropZone = document.getElementById("dropZone");

      const uploadSection = document.getElementById("upload-section");
      const loadingSection = document.getElementById("loading-section");
      const resultSection = document.getElementById("result-section");

      const resultImage = document.getElementById("resultImage");
      const resultLabel = document.getElementById("resultLabel");
      const resultConfidence = document.getElementById("resultConfidence");
      const allConfidences = document.getElementById("allConfidences");

      // ===============================
      // VIEW HELPERS
      // ===============================
      function showUpload() {
        uploadSection.classList.remove("hidden");
        loadingSection.classList.add("hidden");
        resultSection.classList.add("hidden");
      }

      function showLoading() {
        uploadSection.classList.add("hidden");
        loadingSection.classList.remove("hidden");
        resultSection.classList.add("hidden");
      }

      function showResult() {
        uploadSection.classList.add("hidden");
        loadingSection.classList.add("hidden");
        resultSection.classList.remove("hidden");
      }

      function resetUpload() {
        fileInput.value = "";
        showUpload();
      }
      window.resetUpload = resetUpload;

      // ===============================
      // HANDLE FILE (CLICK + CHANGE)
      // ===============================
      fileInput.addEventListener("change", function (e) {
        if (e.target.files.length > 0) {
          handleFile(e.target.files[0]);
        }
      });

      // klik area drop-zone = buka file
      dropZone.addEventListener("click", () => fileInput.click());

      // drag & drop
      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZone.classList.add("dragover");
      });

      dropZone.addEventListener("dragleave", () => {
        dropZone.classList.remove("dragover");
      });

      dropZone.addEventListener("drop", (e) => {
        e.preventDefault();
        dropZone.classList.remove("dragover");
        if (e.dataTransfer.files.length > 0) {
          handleFile(e.dataTransfer.files[0]);
        }
      });

      // ===============================
      // MAIN: KIRIM FILE KE BACKEND
      // ===============================
      function handleFile(file) {
        if (!file) return;

        showLoading();

        const formData = new FormData();
        formData.append("file", file);

        fetch("/predict", {
          method: "POST",
          body: formData,
        })
          .then((res) => res.json())
          .then((data) => {
            // Struktur JSON yang diharapkan:
            // {
            //   success: true/false,
            //   error: "...",              // jika gagal
            //   image: "data:image/...;base64,...",
            //   prediction: "Fresh",
            //   confidence: 99.3,
            //   all_confidences: { Fresh: 99.3, "Formalin-mixed": 0.4, Rotten: 0.3 }
            // }

            if (!data.success) {
              alert(data.error || "Prediction failed.");
              showUpload();
              return;
            }

            // preview image dari backend
            if (data.image) {
              resultImage.src = data.image;
            }

            // label
            resultLabel.textContent = data.prediction || "Unknown";

            // confidence utama
            const conf = data.confidence || 0;
            resultConfidence.textContent = conf.toFixed(2) + "%";

            // isi semua probabilitas
            allConfidences.innerHTML = "";
            if (data.all_confidences) {
              Object.keys(data.all_confidences).forEach((cls) => {
                const p = data.all_confidences[cls] || 0;
                const row = document.createElement("div");
                row.className =
                  "flex items-center justify-between text-sm";

                row.innerHTML = `
                  <span class="font-medium text-gray-700">${cls}</span>
                  <div class="flex-1 mx-3 h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-2 bg-emerald-500 confidence-bar" style="width:${p}%;"></div>
                  </div>
                  <span class="font-semibold text-gray-800">${p.toFixed(2)}%</span>
                `;
                allConfidences.appendChild(row);
              });
            }

            showResult();
          })
          .catch((err) => {
            console.error("Error:", err);
            alert("Error connecting to server.");
            showUpload();
          });
      }

      // tampilkan upload view saat pertama load
      showUpload();
    </script>
  </body>
</html>
